<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!doctype html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="utf-8" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;Cost–Benefit Analysis&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>/* --------- Apple‑inspired, clean + airy --------- */</p>
<p class="p1"><span class="Apple-converted-space">    </span>:root{</p>
<p class="p1"><span class="Apple-converted-space">      </span>--bg:#ffffff; --ink:#0b0b0c; --muted:#6e6e73; --line:#e5e5ea;</p>
<p class="p1"><span class="Apple-converted-space">      </span>--card:#ffffff; --shadow:0 8px 30px rgba(0,0,0,.06);</p>
<p class="p1"><span class="Apple-converted-space">      </span>--radius:18px; --radius-sm:12px; --accent:#0071e3; /* Apple blue */</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>*{box-sizing:border-box}</p>
<p class="p1"><span class="Apple-converted-space">    </span>html,body{height:100%}</p>
<p class="p1"><span class="Apple-converted-space">    </span>body{margin:0; background:var(--bg); color:var(--ink); font:16px/1.6 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif}</p>
<p class="p1"><span class="Apple-converted-space">    </span>a{color:var(--accent); text-decoration:none}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.wrap{max-width:1100px; margin:0 auto; padding:24px}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>/* Hero */</p>
<p class="p1"><span class="Apple-converted-space">    </span>.hero{padding:48px 0 28px; text-align:center}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.eyebrow{letter-spacing:.12em; text-transform:uppercase; color:var(--muted); font-weight:600; font-size:12px}</p>
<p class="p1"><span class="Apple-converted-space">    </span>h1{margin:.25rem 0 0; font-size:clamp(28px,4vw,44px); line-height:1.15; font-weight:700}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.sub{margin:10px auto 0; max-width:680px; color:var(--muted)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>/* Grid + cards */</p>
<p class="p1"><span class="Apple-converted-space">    </span>.grid{display:grid; gap:18px; grid-template-columns:repeat(12,1fr)}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.card{grid-column:span 12; background:var(--card); border:1px solid var(--line); border-radius:var(--radius); box-shadow:var(--shadow); padding:20px}</p>
<p class="p1"><span class="Apple-converted-space">    </span>@media(min-width:880px){</p>
<p class="p1"><span class="Apple-converted-space">      </span>.span-7{grid-column:span 7}</p>
<p class="p1"><span class="Apple-converted-space">      </span>.span-5{grid-column:span 5}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>label{display:block; font-weight:600; margin:10px 0 6px}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.row{display:flex; gap:12px}</p>
<p class="p1"><span class="Apple-converted-space">    </span>input, textarea, select, button{</p>
<p class="p1"><span class="Apple-converted-space">      </span>width:100%; padding:12px 14px; border:1px solid var(--line); border-radius:var(--radius-sm);</p>
<p class="p1"><span class="Apple-converted-space">      </span>background:#fff; color:var(--ink); font:inherit</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>textarea{min-height:104px; resize:vertical}</p>
<p class="p1"><span class="Apple-converted-space">    </span>button{cursor:pointer; font-weight:600; transition:transform .06s ease, box-shadow .2s ease, background .2s}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.btn{background:var(--ink); color:#fff; border-color:transparent}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.btn:hover{transform:translateY(-1px)}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.btn.secondary{background:#f5f5f7; color:#000; border-color:var(--line)}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.btn.ghost{background:transparent}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.kpi{display:grid; grid-template-columns:1fr auto; gap:6px; align-items:end; padding:10px 0; border-bottom:1px dashed var(--line)}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.kpi:last-child{border-bottom:none}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.kpi .label{color:var(--muted)}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.kpi .value{font-size:clamp(18px,3.2vw,28px); font-weight:700}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.hint{font-size:12px; color:var(--muted)}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>/* Tooltip (generic) */</p>
<p class="p1"><span class="Apple-converted-space">    </span>.tip{display:inline-flex; align-items:center; gap:6px}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.tip i{display:inline-grid; place-items:center; width:18px; height:18px; border-radius:50%; background:#e8f0fe; color:#1b66ff; font-style:normal; font-weight:700; font-size:12px}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.tip[data-tooltip]{position:relative}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.tip[data-tooltip]:hover::after{</p>
<p class="p1"><span class="Apple-converted-space">      </span>content:attr(data-tooltip);</p>
<p class="p1"><span class="Apple-converted-space">      </span>position:absolute; left:0; top:120%; z-index:10; min-width:220px; max-width:420px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background:#111; color:#fff; padding:10px 12px; border-radius:10px; box-shadow:var(--shadow);</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size:12px; line-height:1.45;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>/* Tooltips for chips (example buttons) */</p>
<p class="p1"><span class="Apple-converted-space">    </span>.chip[data-tooltip]{position:relative}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.chip[data-tooltip]:hover::after{</p>
<p class="p1"><span class="Apple-converted-space">      </span>content:attr(data-tooltip);</p>
<p class="p1"><span class="Apple-converted-space">      </span>position:absolute; left:0; top:120%; z-index:10; min-width:240px; max-width:440px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background:#111; color:#fff; padding:10px 12px; border-radius:10px; box-shadow:var(--shadow);</p>
<p class="p1"><span class="Apple-converted-space">      </span>font-size:12px; line-height:1.45;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>/* Example chips */</p>
<p class="p1"><span class="Apple-converted-space">    </span>.chips{display:flex; flex-wrap:wrap; gap:8px; margin-top:6px}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.chip{padding:8px 12px; border:1px solid var(--line); border-radius:999px; background:#f5f5f7; cursor:pointer; font-weight:600; font-size:14px}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>.footer{margin:30px 0 60px; text-align:center; color:var(--muted); font-size:13px}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.small{font-size:13px; color:var(--muted)}</p>
<p class="p1"><span class="Apple-converted-space">    </span>code{background:#f5f5f7; padding:2px 6px; border-radius:8px}</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="wrap"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;header class="hero"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="eyebrow"&gt;Finance tools&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;h1&gt;Cost–Benefit Analysis&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;p class="sub"&gt;A simple, privacy‑friendly calculator you can host on GitHub Pages. Paste numbers or upload a CSV, then get &lt;strong&gt;NPV&lt;/strong&gt;, &lt;strong&gt;Payback&lt;/strong&gt;, and &lt;strong&gt;B/C Ratio&lt;/strong&gt; instantly.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/header&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;section class="grid"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="card span-7"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h2 style="margin:0 0 8px"&gt;Inputs&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;p class="small"&gt;Everything runs in your browser. No data leaves your device.&lt;/p&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label class="tip" data-tooltip="Your upfront project cost at time 0. Enter as a positive number; the calculator will treat it as a cost."&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>Initial Outlay (₱) &lt;i&gt;i&lt;/i&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;input id="outlay" type="number" inputmode="decimal" value="100000" /&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="row" style="margin-top:10px"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div style="flex:1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label class="tip" data-tooltip="Annual discount rate (your required return or cost of capital). If your cash flows are monthly, use a monthly rate."&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>Discount Rate (%) &lt;i&gt;i&lt;/i&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input id="rate" type="number" inputmode="decimal" value="12" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div style="flex:1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;label class="tip" data-tooltip="Choose the time unit that matches your list below (years by default). This is only a note—calculations use the sequence you provide."&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>Period &lt;i&gt;i&lt;/i&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;select id="period" aria-label="Period granularity"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;option value="year" selected&gt;Year&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;option value="quarter"&gt;Quarter&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;option value="month"&gt;Month&lt;/option&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/select&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;label class="tip" style="margin-top:10px" data-tooltip="List your expected benefits (cash inflows) for each future period, separated by commas or spaces. Example: 30000, 35000, 40000."&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>Cash Flows by Period &lt;i&gt;i&lt;/i&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;textarea id="flows" placeholder="e.g., 30000, 35000, 40000, 45000"&gt;30000, 35000, 40000, 45000&lt;/textarea&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="row" style="margin-top:10px; align-items:center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button class="btn" id="btnCompute" title="Compute results"&gt;Compute&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;label class="btn secondary" style="display:inline-flex; align-items:center; justify-content:center; gap:8px; white-space:nowrap; cursor:pointer"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;input id="csv" type="file" accept=".csv" style="display:none" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>Upload CSV</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;button class="btn ghost" id="btnClear" title="Clear inputs"&gt;Clear&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;p class="hint"&gt;CSV format: single row like &lt;code&gt;30000,35000,40000&lt;/code&gt;. Headers are ignored.&lt;/p&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div style="margin-top:10px"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="tip" data-tooltip="Hover each example to see what question it answers and how to read the results. Click to auto‑fill the inputs."&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;strong&gt;Try an example&lt;/strong&gt; &lt;i&gt;i&lt;/i&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="chips"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span class="chip" data-demo="coffee" data-tooltip="Goal: Test if a ₱100,000 coffee cart is worth it at a 10% required return. Loads: Outlay ₱100k; Rate 10%; Inflows 40k, 50k, 60k, 65k. Interpret: +NPV = value created; Payback ≈ 2 yrs = fast recovery; B/C &gt; 1 = PV benefits outweigh cost."&gt;☕ Coffee Cart&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span class="chip" data-demo="machine" data-tooltip="Goal: Decide on a ₱250,000 machine at 12% cost of capital. Loads: Outlay ₱250k; Rate 12%; Inflows 90k, 100k, 110k, 110k, 120k. Interpret: Strong +NPV = adds value; Payback ≈ 3 yrs; B/C &gt; 1 = savings beat cost in PV terms."&gt;🛠️ Equipment Savings&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span class="chip" data-demo="cma" data-tooltip="Goal: CMA‑style practice at 15% with uneven inflows. Loads: Outlay ₱500k; Rate 15%; Inflows 200k, 250k, 200k, 150k. Interpret: If NPV ≤ 0, it misses hurdle; Payback may be long; B/C &lt; 1 = costs exceed benefits after discounting."&gt;📘 CMA Practice&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="card span-5"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h2 style="margin:0 0 8px"&gt;Results&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="kpi"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="label tip" data-tooltip="Net Present Value: PV(benefits) minus your initial outlay."&gt;NPV (₱) &lt;i&gt;i&lt;/i&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="value" id="npv"&gt;—&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="kpi"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="label tip" data-tooltip="Simple payback ignores discounting. It's the first period where cumulative inflows exceed the initial outlay."&gt;Payback (periods) &lt;i&gt;i&lt;/i&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="value" id="payback"&gt;—&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="kpi"&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="label tip" data-tooltip="Benefit–Cost Ratio: PV of benefits divided by PV of costs (here, costs are the initial outlay)."&gt;B/C Ratio &lt;i&gt;i&lt;/i&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="value" id="bcr"&gt;—&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;p class="hint" style="margin-top:8px"&gt;Tip: Positive NPV and B/C &amp;gt; 1 generally indicate a worthwhile project.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/section&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;section class="grid" style="margin-top:6px"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div class="card span-12"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h2 style="margin:0 0 10px"&gt;How to use&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;ol&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;li&gt;&lt;strong&gt;Enter Initial Outlay&lt;/strong&gt; (your upfront cost) and &lt;strong&gt;Discount Rate&lt;/strong&gt; that matches your period unit.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;li&gt;List your expected &lt;strong&gt;cash inflows per period&lt;/strong&gt; in the box, or upload a &lt;strong&gt;CSV&lt;/strong&gt;.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;li&gt;Click &lt;strong&gt;Compute&lt;/strong&gt;. Review NPV, Payback, and B/C Ratio. Adjust inputs to test scenarios.&lt;/li&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/ol&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;details&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;summary&gt;What about ongoing costs?&lt;/summary&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>This simple version assumes one upfront cost (Initial Outlay). If you have costs later, subtract them from that period's inflow (net inflow = benefits − costs). If you need a separate costs column, we can extend this file.</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/details&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/section&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;footer class="footer"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>Built for GitHub Pages · Works offline · No tracking</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/footer&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const $ = (sel) =&gt; document.querySelector(sel);</p>
<p class="p1"><span class="Apple-converted-space">    </span>const peso = (x) =&gt; Number.isFinite(x) ? x.toLocaleString(undefined,{style:'currency',currency:'PHP',maximumFractionDigits:2}) : '—';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function parseFlows(str){</p>
<p class="p1"><span class="Apple-converted-space">      </span>// Accept commas or spaces; ignore non-numeric tokens (headers)</p>
<p class="p1"><span class="Apple-converted-space">      </span>return (str||'')</p>
<p class="p1"><span class="Apple-converted-space">        </span>.split(/[\n,\s,;]+/)</p>
<p class="p1"><span class="Apple-converted-space">        </span>.map(s =&gt; Number(String(s).replace(/[^-\d.]/g,'')))</p>
<p class="p1"><span class="Apple-converted-space">        </span>.filter(n =&gt; !Number.isNaN(n));</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function compute(){</p>
<p class="p1"><span class="Apple-converted-space">      </span>const outlay = Number($('#outlay').value || 0);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const r = Number($('#rate').value || 0) / 100;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const flows = parseFlows($('#flows').value);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// PV of inflows</p>
<p class="p1"><span class="Apple-converted-space">      </span>let pvBenefits = 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>for(let t=0; t&lt;flows.length; t++){</p>
<p class="p1"><span class="Apple-converted-space">        </span>pvBenefits += flows[t] / Math.pow(1 + r, t + 1);</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>const npv = pvBenefits - outlay;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Simple payback (undiscounted)</p>
<p class="p1"><span class="Apple-converted-space">      </span>let cum = 0, payback = 'Not recovered';</p>
<p class="p1"><span class="Apple-converted-space">      </span>for(let i=0;i&lt;flows.length;i++){</p>
<p class="p1"><span class="Apple-converted-space">        </span>cum += flows[i];</p>
<p class="p1"><span class="Apple-converted-space">        </span>if(cum &gt;= outlay){ payback = (i+1).toString(); break; }</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>const bcr = outlay &gt; 0 ? (pvBenefits / outlay) : NaN;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>$('#npv').textContent = peso(npv);</p>
<p class="p1"><span class="Apple-converted-space">      </span>$('#payback').textContent = payback;</p>
<p class="p1"><span class="Apple-converted-space">      </span>$('#bcr').textContent = Number.isFinite(bcr) ? bcr.toFixed(2) : '—';</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// CSV upload</p>
<p class="p1"><span class="Apple-converted-space">    </span>$('#csv').addEventListener('change', async (e)=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">      </span>const file = e.target.files?.[0]; if(!file) return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const txt = await file.text();</p>
<p class="p1"><span class="Apple-converted-space">      </span>// Use the first non-empty line; ignore lines starting with letters (headers)</p>
<p class="p1"><span class="Apple-converted-space">      </span>const line = txt.split(/\r?\n/).find(l =&gt; /[\d-]/.test(l)) || '';</p>
<p class="p1"><span class="Apple-converted-space">      </span>const vals = parseFlows(line);</p>
<p class="p1"><span class="Apple-converted-space">      </span>if(vals.length){ $('#flows').value = vals.join(', '); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>$('#btnCompute').addEventListener('click', compute);</p>
<p class="p1"><span class="Apple-converted-space">    </span>$('#btnClear').addEventListener('click', ()=&gt;{</p>
<p class="p1"><span class="Apple-converted-space">      </span>$('#outlay').value = '';</p>
<p class="p1"><span class="Apple-converted-space">      </span>$('#rate').value = '';</p>
<p class="p1"><span class="Apple-converted-space">      </span>$('#flows').value = '';</p>
<p class="p1"><span class="Apple-converted-space">      </span>$('#npv').textContent = '—';</p>
<p class="p1"><span class="Apple-converted-space">      </span>$('#payback').textContent = '—';</p>
<p class="p1"><span class="Apple-converted-space">      </span>$('#bcr').textContent = '—';</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Demo scenarios</p>
<p class="p1"><span class="Apple-converted-space">    </span>const demos = {</p>
<p class="p1"><span class="Apple-converted-space">      </span>coffee: { outlay: 100000, rate: 10, flows: [40000,50000,60000,65000] },</p>
<p class="p1"><span class="Apple-converted-space">      </span>machine: { outlay: 250000, rate: 12, flows: [90000,100000,110000,110000,120000] },</p>
<p class="p1"><span class="Apple-converted-space">      </span>cma: { outlay: 500000, rate: 15, flows: [200000,250000,200000,150000] }</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>document.querySelectorAll('.chip').forEach(chip =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>chip.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const key = chip.getAttribute('data-demo');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const d = demos[key]; if(!d) return;</p>
<p class="p1"><span class="Apple-converted-space">        </span>$('#outlay').value = d.outlay;</p>
<p class="p1"><span class="Apple-converted-space">        </span>$('#rate').value = d.rate;</p>
<p class="p1"><span class="Apple-converted-space">        </span>$('#flows').value = d.flows.join(', ');</p>
<p class="p1"><span class="Apple-converted-space">        </span>compute();</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Auto-compute on load with defaults</p>
<p class="p1"><span class="Apple-converted-space">    </span>compute();</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
